{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import TaskEditModal from\"./components/TaskEditModal\";import Task from\"./components/Task\";import TabList from\"./components/TabList\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.interceptors.response.use(function(response){if(response.headers['content-type']!=='application/json'){alert('unsupport data format in server response');return Promise.reject(new Error('unsupport data format'));}return response;});const App=()=>{const[isShowCompleted,setIsShowCompleted]=useState(false);const[taskList,setTaskList]=useState([]);const[activeTask,setActiveTask]=useState(null);const refreshList=()=>{axios.get(\"/api/tasks/\").then(res=>setTaskList(res.data)).catch(console.error);};useEffect(()=>{refreshList();},[]);const handleSubmit=item=>{const request=item.id?axios.put(`/api/tasks/${item.id}/`,item):axios.post(\"/api/tasks/\",item);request.then(res=>{refreshList();setActiveTask(null);}).catch(console.error);};const handleDelete=item=>{axios.delete(`/api/tasks/${item.id}/`).then(refreshList).catch(console.error);};const createTask=()=>{setActiveTask({title:\"\",description:\"\",completed:false});};const showedTasks=taskList.filter(item=>item.completed===isShowCompleted);return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text text-uppercase text-center my-4\",children:\"Taski\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-10 mx-auto p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:createTask,children:\"Add task\"})}),/*#__PURE__*/_jsx(TabList,{displayCompleted:setIsShowCompleted,isShowCompleted:isShowCompleted}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush border-top-0\",children:showedTasks.map(task=>/*#__PURE__*/_jsx(Task,{data:task,handleEdit:setActiveTask,handleDelete:handleDelete},task.id))})]})})}),activeTask&&/*#__PURE__*/_jsx(TaskEditModal,{taskData:activeTask,toggle:()=>setActiveTask(null),onSave:handleSubmit})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","TaskEditModal","Task","TabList","jsx","_jsx","jsxs","_jsxs","interceptors","response","use","headers","alert","Promise","reject","Error","App","isShowCompleted","setIsShowCompleted","taskList","setTaskList","activeTask","setActiveTask","refreshList","get","then","res","data","catch","console","error","handleSubmit","item","request","id","put","post","handleDelete","delete","createTask","title","description","completed","showedTasks","filter","className","children","onClick","displayCompleted","map","task","handleEdit","taskData","toggle","onSave"],"sources":["/root/devops/tasks_4u/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport TaskEditModal from \"./components/TaskEditModal\";\nimport Task from \"./components/Task\";\nimport TabList from \"./components/TabList\";\n\naxios.interceptors.response.use(function (response) {\n  if (response.headers['content-type'] !== 'application/json') {\n    alert('unsupport data format in server response')\n    return Promise.reject(new Error('unsupport data format'));\n  }\n  return response;\n});\n\nconst App = () => {\n  const [isShowCompleted, setIsShowCompleted] = useState(false);\n  const [taskList, setTaskList] = useState([]);\n  const [activeTask, setActiveTask] = useState(null);\n\n  const refreshList = () => {\n    axios\n      .get(\"/api/tasks/\")\n      .then((res) => setTaskList(res.data))\n      .catch(console.error);\n  };\n\n  useEffect(() => {\n    refreshList();\n  }, []);\n\n  const handleSubmit = (item) => {\n    const request = item.id\n      ? axios.put(`/api/tasks/${item.id}/`, item)\n      : axios.post(\"/api/tasks/\", item);\n\n    request\n      .then((res) => {\n        refreshList();\n        setActiveTask(null);\n      })\n      .catch(console.error);\n  };\n\n  const handleDelete = (item) => {\n    axios\n      .delete(`/api/tasks/${item.id}/`)\n      .then(refreshList)\n      .catch(console.error);\n  };\n\n  const createTask = () => {\n    setActiveTask({ title: \"\", description: \"\", completed: false });\n  };\n\n  const showedTasks = taskList.filter(\n    (item) => item.completed === isShowCompleted\n  );\n\n  return (\n    <main className=\"container\">\n      <h1 className=\"text text-uppercase text-center my-4\">Taski</h1>\n      <div className=\"row\">\n        <div className=\"col-md-6 col-sm-10 mx-auto p-0\">\n          <div className=\"card p-3\">\n            <div className=\"mb-4\">\n              <button className=\"btn btn-primary\" onClick={createTask}>\n                Add task\n              </button>\n            </div>\n            <TabList\n              displayCompleted={setIsShowCompleted}\n              isShowCompleted={isShowCompleted}\n            />\n            <ul className=\"list-group list-group-flush border-top-0\">\n              {showedTasks.map((task) => (\n                <Task\n                  key={task.id}\n                  data={task}\n                  handleEdit={setActiveTask}\n                  handleDelete={handleDelete}\n                />\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n      {activeTask && (\n        <TaskEditModal\n          taskData={activeTask}\n          toggle={() => setActiveTask(null)}\n          onSave={handleSubmit}\n        />\n      )}\n    </main>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}