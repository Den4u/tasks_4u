{"ast":null,"code":"var _jsxFileName = \"/root/devops/tasks_4u/frontend/src/App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport TaskEditModal from \"./components/TaskEditModal\";\nimport Task from \"./components/Task\";\nimport TabList from \"./components/TabList\";\naxios.interceptors.response.use(function (response) {\n  if (response.headers['content-type'] !== 'application/json') {\n    alert('unsupport data format in server response');\n    return Promise.reject(new Error('unsupport data format'));\n  }\n  return response;\n});\nconst App = () => {\n  const [isShowCompleted, setIsShowCompleted] = useState(false);\n  const [taskList, setTaskList] = useState([]);\n  const [activeTask, setActiveTask] = useState(null);\n  const refreshList = () => {\n    axios.get(\"/api/tasks/\").then(res => setTaskList(res.data)).catch(console.error);\n  };\n  useEffect(() => {\n    refreshList();\n  }, []);\n  const handleSubmit = item => {\n    const request = item.id ? axios.put(`/api/tasks/${item.id}/`, item) : axios.post(\"/api/tasks/\", item);\n    request.then(res => {\n      refreshList();\n      setActiveTask(null);\n    }).catch(console.error);\n  };\n  const handleDelete = item => {\n    axios.delete(`/api/tasks/${item.id}/`).then(refreshList).catch(console.error);\n  };\n  const createTask = () => {\n    setActiveTask({\n      title: \"\",\n      description: \"\",\n      completed: false\n    });\n  };\n  const showedTasks = taskList.filter(item => item.completed === isShowCompleted);\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text text-uppercase text-center my-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, \"Taski\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 col-sm-10 mx-auto p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card p-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: createTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  }, \"Add task\")), /*#__PURE__*/React.createElement(TabList, {\n    displayCompleted: setIsShowCompleted,\n    isShowCompleted: isShowCompleted,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group list-group-flush border-top-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, showedTasks.map(task => /*#__PURE__*/React.createElement(Task, {\n    key: task.id,\n    data: task,\n    handleEdit: setActiveTask,\n    handleDelete: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  })))))), activeTask && /*#__PURE__*/React.createElement(TaskEditModal, {\n    taskData: activeTask,\n    toggle: () => setActiveTask(null),\n    onSave: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }));\n};\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","axios","TaskEditModal","Task","TabList","interceptors","response","use","headers","alert","Promise","reject","Error","App","isShowCompleted","setIsShowCompleted","taskList","setTaskList","activeTask","setActiveTask","refreshList","get","then","res","data","catch","console","error","handleSubmit","item","request","id","put","post","handleDelete","delete","createTask","title","description","completed","showedTasks","filter","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","displayCompleted","map","task","key","handleEdit","taskData","toggle","onSave"],"sources":["/root/devops/tasks_4u/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport TaskEditModal from \"./components/TaskEditModal\";\nimport Task from \"./components/Task\";\nimport TabList from \"./components/TabList\";\n\naxios.interceptors.response.use(function (response) {\n  if (response.headers['content-type'] !== 'application/json') {\n    alert('unsupport data format in server response')\n    return Promise.reject(new Error('unsupport data format'));\n  }\n  return response;\n});\n\nconst App = () => {\n  const [isShowCompleted, setIsShowCompleted] = useState(false);\n  const [taskList, setTaskList] = useState([]);\n  const [activeTask, setActiveTask] = useState(null);\n\n  const refreshList = () => {\n    axios\n      .get(\"/api/tasks/\")\n      .then((res) => setTaskList(res.data))\n      .catch(console.error);\n  };\n\n  useEffect(() => {\n    refreshList();\n  }, []);\n\n  const handleSubmit = (item) => {\n    const request = item.id\n      ? axios.put(`/api/tasks/${item.id}/`, item)\n      : axios.post(\"/api/tasks/\", item);\n\n    request\n      .then((res) => {\n        refreshList();\n        setActiveTask(null);\n      })\n      .catch(console.error);\n  };\n\n  const handleDelete = (item) => {\n    axios\n      .delete(`/api/tasks/${item.id}/`)\n      .then(refreshList)\n      .catch(console.error);\n  };\n\n  const createTask = () => {\n    setActiveTask({ title: \"\", description: \"\", completed: false });\n  };\n\n  const showedTasks = taskList.filter(\n    (item) => item.completed === isShowCompleted\n  );\n\n  return (\n    <main className=\"container\">\n      <h1 className=\"text text-uppercase text-center my-4\">Taski</h1>\n      <div className=\"row\">\n        <div className=\"col-md-6 col-sm-10 mx-auto p-0\">\n          <div className=\"card p-3\">\n            <div className=\"mb-4\">\n              <button className=\"btn btn-primary\" onClick={createTask}>\n                Add task\n              </button>\n            </div>\n            <TabList\n              displayCompleted={setIsShowCompleted}\n              isShowCompleted={isShowCompleted}\n            />\n            <ul className=\"list-group list-group-flush border-top-0\">\n              {showedTasks.map((task) => (\n                <Task\n                  key={task.id}\n                  data={task}\n                  handleEdit={setActiveTask}\n                  handleDelete={handleDelete}\n                />\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n      {activeTask && (\n        <TaskEditModal\n          taskData={activeTask}\n          toggle={() => setActiveTask(null)}\n          onSave={handleSubmit}\n        />\n      )}\n    </main>\n  );\n};\n\nexport default App;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,aAAa,MAAM,4BAA4B;AACtD,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,OAAO,MAAM,sBAAsB;AAE1CH,KAAK,CAACI,YAAY,CAACC,QAAQ,CAACC,GAAG,CAAC,UAAUD,QAAQ,EAAE;EAClD,IAAIA,QAAQ,CAACE,OAAO,CAAC,cAAc,CAAC,KAAK,kBAAkB,EAAE;IAC3DC,KAAK,CAAC,0CAA0C,CAAC;IACjD,OAAOC,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAAC,uBAAuB,CAAC,CAAC;EAC3D;EACA,OAAON,QAAQ;AACjB,CAAC,CAAC;AAEF,MAAMO,GAAG,GAAGA,CAAA,KAAM;EAChB,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAElD,MAAMoB,WAAW,GAAGA,CAAA,KAAM;IACxBnB,KAAK,CACFoB,GAAG,CAAC,aAAa,CAAC,CAClBC,IAAI,CAAEC,GAAG,IAAKN,WAAW,CAACM,GAAG,CAACC,IAAI,CAAC,CAAC,CACpCC,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;EACzB,CAAC;EAED5B,SAAS,CAAC,MAAM;IACdqB,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,YAAY,GAAIC,IAAI,IAAK;IAC7B,MAAMC,OAAO,GAAGD,IAAI,CAACE,EAAE,GACnB9B,KAAK,CAAC+B,GAAG,CAAC,cAAcH,IAAI,CAACE,EAAE,GAAG,EAAEF,IAAI,CAAC,GACzC5B,KAAK,CAACgC,IAAI,CAAC,aAAa,EAAEJ,IAAI,CAAC;IAEnCC,OAAO,CACJR,IAAI,CAAEC,GAAG,IAAK;MACbH,WAAW,CAAC,CAAC;MACbD,aAAa,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC,CACDM,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;EACzB,CAAC;EAED,MAAMO,YAAY,GAAIL,IAAI,IAAK;IAC7B5B,KAAK,CACFkC,MAAM,CAAC,cAAcN,IAAI,CAACE,EAAE,GAAG,CAAC,CAChCT,IAAI,CAACF,WAAW,CAAC,CACjBK,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;EACzB,CAAC;EAED,MAAMS,UAAU,GAAGA,CAAA,KAAM;IACvBjB,aAAa,CAAC;MAAEkB,KAAK,EAAE,EAAE;MAAEC,WAAW,EAAE,EAAE;MAAEC,SAAS,EAAE;IAAM,CAAC,CAAC;EACjE,CAAC;EAED,MAAMC,WAAW,GAAGxB,QAAQ,CAACyB,MAAM,CAChCZ,IAAI,IAAKA,IAAI,CAACU,SAAS,KAAKzB,eAC/B,CAAC;EAED,oBACEhB,KAAA,CAAA4C,aAAA;IAAMC,SAAS,EAAC,WAAW;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzBnD,KAAA,CAAA4C,aAAA;IAAIC,SAAS,EAAC,sCAAsC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,OAAS,CAAC,eAC/DnD,KAAA,CAAA4C,aAAA;IAAKC,SAAS,EAAC,KAAK;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAClBnD,KAAA,CAAA4C,aAAA;IAAKC,SAAS,EAAC,gCAAgC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7CnD,KAAA,CAAA4C,aAAA;IAAKC,SAAS,EAAC,UAAU;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACvBnD,KAAA,CAAA4C,aAAA;IAAKC,SAAS,EAAC,MAAM;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnBnD,KAAA,CAAA4C,aAAA;IAAQC,SAAS,EAAC,iBAAiB;IAACO,OAAO,EAAEd,UAAW;IAAAQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAEjD,CACL,CAAC,eACNnD,KAAA,CAAA4C,aAAA,CAACtC,OAAO;IACN+C,gBAAgB,EAAEpC,kBAAmB;IACrCD,eAAe,EAAEA,eAAgB;IAAA8B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAClC,CAAC,eACFnD,KAAA,CAAA4C,aAAA;IAAIC,SAAS,EAAC,0CAA0C;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACrDT,WAAW,CAACY,GAAG,CAAEC,IAAI,iBACpBvD,KAAA,CAAA4C,aAAA,CAACvC,IAAI;IACHmD,GAAG,EAAED,IAAI,CAACtB,EAAG;IACbP,IAAI,EAAE6B,IAAK;IACXE,UAAU,EAAEpC,aAAc;IAC1Be,YAAY,EAAEA,YAAa;IAAAU,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC5B,CACF,CACC,CACD,CACF,CACF,CAAC,EACL/B,UAAU,iBACTpB,KAAA,CAAA4C,aAAA,CAACxC,aAAa;IACZsD,QAAQ,EAAEtC,UAAW;IACrBuC,MAAM,EAAEA,CAAA,KAAMtC,aAAa,CAAC,IAAI,CAAE;IAClCuC,MAAM,EAAE9B,YAAa;IAAAgB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACtB,CAEC,CAAC;AAEX,CAAC;AAED,eAAepC,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module"}